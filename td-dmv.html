<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TD-DMV Documentation</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-id-card"></i>
                    <h1>TD-DMV</h1>
                </div>
                <nav class="nav">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-home"></i>
                        Home
                    </a>
                    <a href="#overview" class="nav-link">Overview</a>
                    <a href="#installation" class="nav-link">Installation</a>
                    <a href="#configuration" class="nav-link">Configuration</a>
                    <a href="#features" class="nav-link">Features</a>
                    <a href="#support" class="nav-link">Support</a>
                </nav>
            </div>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3>Getting Started</h3>
                    <a href="#overview" class="sidebar-link">Overview</a>
                    <a href="#installation" class="sidebar-link">Installation</a>
                    <a href="#configuration" class="sidebar-link">Configuration</a>
                </div>
                
                <div class="nav-section">
                    <h3>Features</h3>
                    <a href="#vehicle-registration" class="sidebar-link">Vehicle Registration</a>
                    <a href="#leo-tools" class="sidebar-link">LEO Tools</a>
                    <a href="#anpr-system" class="sidebar-link">ANPR System</a>
                    <a href="#dmv-documents" class="sidebar-link">DMV Documents</a>
                </div>
                
                <div class="nav-section">
                    <h3>Commands & API</h3>
                    <a href="#commands" class="sidebar-link">Commands</a>
                    <a href="#permissions" class="sidebar-link">Permissions</a>
                    <a href="#database" class="sidebar-link">Database</a>
                </div>
                
                <div class="nav-section">
                    <h3>Updates & Support</h3>
                    <a href="#changelog" class="sidebar-link">Changelog</a>
                    <a href="#troubleshooting" class="sidebar-link">Troubleshooting</a>
                    <a href="#support" class="sidebar-link">Get Help</a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main">
            <!-- Hero Section -->
            <section class="hero">
                <div class="hero-content">
                    <h1>TD-DMV Documentation</h1>
                    <p>Advanced Department of Motor Vehicles system for FiveM servers featuring vehicle registration, law enforcement lookup tools, and ANPR system.</p>
                    <div class="hero-badges">
                        <span class="badge">Version 1.1.0</span>
                        <span class="badge">FiveM Ready</span>
                        <span class="badge">ox_lib Required</span>
                        <span class="badge">Enhanced ANPR</span>
                    </div>
                </div>
            </section>

            <!-- Overview Section -->
            <section id="overview" class="section">
                <h2>Overview</h2>
                <p>TD-DMV is a comprehensive Department of Motor Vehicles system designed for FiveM servers. It provides players with the ability to register their vehicles with the DMV, while giving law enforcement officers advanced tools for vehicle lookup and automatic license plate recognition.</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-car"></i>
                        </div>
                        <h3>Vehicle Registration</h3>
                        <p>Register vehicles with comprehensive player information and unique license plate validation.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>LEO Lookup Tools</h3>
                        <p>Advanced search capabilities for law enforcement officers to find vehicle and owner information.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-camera"></i>
                        </div>
                        <h3>ANPR System</h3>
                        <p>Automatic Number Plate Recognition system for emergency vehicles with realistic detection.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <h3>DMV Documents</h3>
                        <p>Professional-looking registration certificates with printable PDF-style documents.</p>
                    </div>
                </div>
            </section>

            <!-- Installation Section -->
            <section id="installation" class="section">
                <h2>Installation</h2>
                
                <div class="step">
                    <h3>Prerequisites</h3>
                    <p>Before installing TD-DMV, ensure you have the following:</p>
                    <ul>
                        <li><strong>FiveM Server</strong> - Running FiveM server with admin access</li>
                        <li><strong>MySQL Database</strong> - MySQL 5.7+ or MariaDB 10.3+</li>
                        <li><strong>oxmysql Resource</strong> - Latest version installed and configured</li>
                        <li><strong>ox_lib Resource</strong> - Required for UI components and notifications</li>
                    </ul>
                </div>

                <div class="step">
                    <h3>Step 1: Download and Extract</h3>
                    <p>Download TD-DMV and extract it to your server's <code>resources</code> folder.</p>
                    <div class="code-block">
                        <code>resources/td-dmv/</code>
                    </div>
                </div>

                <div class="step">
                    <h3>Step 2: Database Setup</h3>
                    <p>Import the SQL file into your database:</p>
                    <div class="code-block">
                        <code>Run the sql file provided.</code>
                    </div>
                    <p>This will create the following tables:</p>
                    <ul>
                        <li><code>dmv_players</code> - Player information and identifiers</li>
                        <li><code>dmv_vehicles</code> - Vehicle registration records</li>
                        <li><code>dmv_anpr_logs</code> - ANPR detection logs</li>
                    </ul>
                </div>

                <div class="step">
                    <h3>Step 3: Resource Configuration</h3>
                    <p>Add TD-DMV to your <code>server.cfg</code> file:</p>
                    <div class="code-block">
                        <code># Database (must load first)<br>
                        ensure ox_lib
                        ensure oxmysql<br><br>
                        # TD-DMV (loads after oxmysql and ox_lib)<br>
                        ensure td-dmv</code>
                    </div>
                </div>

                <div class="step">
                    <h3>Step 4: Permissions Setup</h3>
                    <p>Add these ACE permissions to your <code>server.cfg</code>:</p>
                    <div class="code-block">
                        <code># DMV LEO Access<br>
                        add_ace group.admin leo.dmv allow<br>
                        add_ace group.police leo.dmv allow<br><br>
                        # ANPR System Access<br>
                        add_ace group.admin leo.anpr allow<br>
                        add_ace group.police leo.anpr allow</code>
                    </div>
                </div>
            </section>

            <!-- Configuration Section -->
            <section id="configuration" class="section">
                <h2>Configuration</h2>
                
                <div class="config-section">
                    <h3>General Settings</h3>
                    <div class="code-block">
                        <code>Config = {}<br><br>
                        -- General Settings<br>
                        Config.Debug = false<br>
                        Config.Locale = 'en'<br><br>
                        -- Commands<br>
                        Config.DMVCommand = 'dmv'<br>
                        Config.ANPRCommand = 'anpr'</code>
                    </div>
                </div>

                <div class="config-section">
                    <h3>ANPR Settings</h3>
                    <div class="code-block">
                        <code>-- ANPR Settings<br>
                        Config.ANPRRange = 15.0 -- Overall detection range<br>
                        Config.ANPRCheckInterval = 1000 -- Check frequency (ms)<br>
                        Config.ANPRFrontCamRange = 20.0 -- Front camera range<br>
                        Config.ANPRRearCamRange = 15.0 -- Rear camera range<br>
                        Config.ANPRCooldownUnregistered = 5000 -- Cooldown for unregistered alerts (ms)<br>
                        Config.ANPRCooldownStolen = 7500 -- Cooldown for stolen alerts (ms)</code>
                    </div>
                </div>

                <div class="config-section">
                    <h3>Permissions</h3>
                    <div class="code-block">
                        <code>-- Permissions<br>
                        Config.LEOPermission = 'leo.dmv'<br>
                        Config.ANPRPermission = 'leo.anpr'</code>
                    </div>
                </div>

                <div class="config-section">
                    <h3>UI Settings</h3>
                    <div class="code-block">
                        <code>-- UI Settings<br>
                        Config.UITheme = 'dark'<br>
                        Config.UIScale = 1.0<br>
                        Config.NotificationDuration = 5000<br>
                        Config.NotificationPosition = 'top-right'</code>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section id="features" class="section">
                <h2>Features</h2>
                
                <div class="feature-section">
                    <h3 id="vehicle-registration">Vehicle Registration</h3>
                    <p>Players can register their vehicles with the DMV system by following these steps:</p>
                    <ol>
                        <li>Get into the driver seat of a vehicle</li>
                        <li>Use the <code>/dmv</code> command</li>
                        <li>Fill out the registration form with personal information</li>
                        <li>Submit to register the vehicle</li>
                    </ol>
                    
                    <div class="info-box">
                        <h4>Registration Requirements</h4>
                        <ul>
                        <li>Must be in the driver seat</li>
                        <li>License plate must be unique</li>
                        <li>All personal information must be provided</li>
                        <li>Valid date of birth in MM/DD/YYYY format (16-100 years)</li>
                        <li>Character selection from existing characters or create new</li>
                        </ul>
                    </div>
                </div>

                <div class="feature-section">
                    <h3 id="leo-tools">LEO Tools</h3>
                    <p>Law enforcement officers have access to advanced lookup and management tools:</p>
                    
                    <h4>Name Search</h4>
                    <p>Search for players by first name, last name, or both. Results show:</p>
                    <ul>
                        <li>Player information</li>
                        <li>Registered vehicles</li>
                        <li>Registration dates</li>
                        <li>Stolen vehicle indicators with warning badges</li>
                    </ul>
                    
                    <h4>License Plate Search</h4>
                    <p>Search for vehicles by license plate number. Results show:</p>
                    <ul>
                        <li>Vehicle owner information</li>
                        <li>Vehicle details</li>
                        <li>Registration status</li>
                        <li>Stolen vehicle status</li>
                    </ul>
                    
                    <h4>Stolen Vehicle Management</h4>
                    <p>LEO officers can manage stolen vehicle status:</p>
                    <ul>
                        <li>Mark vehicles as stolen or recovered</li>
                        <li>Toggle stolen status from search results</li>
                        <li>Visual indicators for stolen vehicles</li>
                        <li>Integration with ANPR system for automatic stolen vehicle detection</li>
                    </ul>
                    
                    <h4>Vehicle Management Actions</h4>
                    <ul>
                        <li>View DMV registration documents</li>
                        <li>Toggle stolen/recovered status</li>
                        <li>Delete vehicle registrations (with confirmation)</li>
                        <li>Access complete vehicle history</li>
                    </ul>
                </div>

                <div class="feature-section">
                    <h3 id="anpr-system">ANPR System</h3>
                    <p>The Automatic Number Plate Recognition system provides advanced vehicle detection capabilities for law enforcement:</p>
                    
                    <h4>Features</h4>
                    <ul>
                        <li>Automatic detection of unregistered vehicles</li>
                        <li>Automatic detection of stolen vehicles (even if registered)</li>
                        <li>Front and rear camera detection with configurable ranges</li>
                        <li>Realistic range-based detection (15-20 meter range)</li>
                        <li>Player vehicle filtering (excludes NPC vehicles)</li>
                        <li>Intelligent cooldown system (5s for unregistered, 7.5s for stolen)</li>
                        <li>Detection logging for officers</li>
                        <li>Vehicle class 18 (Police) detection for emergency vehicles</li>
                    </ul>
                    
                    <h4>Alert Types</h4>
                    <ul>
                        <li><strong>Unregistered Vehicles:</strong> Orange warning notification</li>
                        <li><strong>Stolen Vehicles:</strong> Red error notification with longer duration</li>
                        <li><strong>Priority System:</strong> Stolen vehicles take priority over unregistered status</li>
                    </ul>
                    
                    <h4>Usage</h4>
                    <ol>
                        <li>Get into an emergency vehicle (vehicle class 18 - Police, Sheriff, etc.)</li>
                        <li>Use <code>/anpr</code> command to enable</li>
                        <li>System automatically detects vehicles in range</li>
                        <li>Notifications show "Front Cam" or "Rear Cam" alerts</li>
                        <li>Different alerts for unregistered vs stolen vehicles</li>
                    </ol>
                    
                    <h4>Configuration</h4>
                    <ul>
                        <li><code>Config.ANPRRange</code>: Overall detection range (default: 15.0m)</li>
                        <li><code>Config.ANPRFrontCamRange</code>: Front camera range (default: 20.0m)</li>
                        <li><code>Config.ANPRRearCamRange</code>: Rear camera range (default: 15.0m)</li>
                        <li><code>Config.ANPRCooldownUnregistered</code>: Cooldown for unregistered alerts (default: 5000ms)</li>
                        <li><code>Config.ANPRCooldownStolen</code>: Cooldown for stolen alerts (default: 7500ms)</li>
                        <li><code>Config.ANPRCheckInterval</code>: Check frequency (default: 1000ms)</li>
                    </ul>
                </div>

                <div class="feature-section">
                    <h3 id="dmv-documents">DMV Documents</h3>
                    <p>Professional-looking registration certificates with:</p>
                    <ul>
                        <li>Complete vehicle and owner information</li>
                        <li>Official DMV styling</li>
                        <li>Printable PDF-style format</li>
                        <li>Document number generation</li>
                        <li>Issue date tracking</li>
                    </ul>
                </div>
            </section>

            <!-- Commands Section -->
            <section id="commands" class="section">
                <h2>Commands</h2>
                
                <div class="command-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Command</th>
                                <th>Permission</th>
                                <th>Description</th>
                                <th>Usage</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>/dmv</code></td>
                                <td>None</td>
                                <td>Open DMV interface</td>
                                <td><code>/dmv</code></td>
                            </tr>
                            <tr>
                                <td><code>/anpr</code></td>
                                <td>leo.anpr</td>
                                <td>Toggle ANPR system</td>
                                <td><code>/anpr</code></td>
                            </tr>
                            <tr>
                                <td><code>/dmvhelp</code></td>
                                <td>None</td>
                                <td>Show DMV help information</td>
                                <td><code>/dmvhelp</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Permissions Section -->
            <section id="permissions" class="section">
                <h2>Permissions</h2>
                
                <div class="permission-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Permission</th>
                                <th>Description</th>
                                <th>Default Groups</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>leo.dmv</code></td>
                                <td>Access to LEO lookup tools</td>
                                <td>admin, police</td>
                            </tr>
                            <tr>
                                <td><code>leo.anpr</code></td>
                                <td>Access to ANPR system</td>
                                <td>admin, police</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Database Section -->
            <section id="database" class="section">
                <h2>Database Structure</h2>
                
                <div class="table-section">
                    <h3>dmv_players</h3>
                    <p>Stores player information and all available identifiers:</p>
                    <div class="code-block">
                        <code>CREATE TABLE dmv_players (<br>
                        &nbsp;&nbsp;id INT PRIMARY KEY AUTO_INCREMENT,<br>
                        &nbsp;&nbsp;license VARCHAR(50) NOT NULL,<br>
                        &nbsp;&nbsp;license2 VARCHAR(50),<br>
                        &nbsp;&nbsp;steam VARCHAR(50),<br>
                        &nbsp;&nbsp;discord VARCHAR(50),<br>
                        &nbsp;&nbsp;xbl VARCHAR(50),<br>
                        &nbsp;&nbsp;live VARCHAR(50),<br>
                        &nbsp;&nbsp;fivem VARCHAR(50),<br>
                        &nbsp;&nbsp;first_name VARCHAR(50) NOT NULL,<br>
                        &nbsp;&nbsp;last_name VARCHAR(50) NOT NULL,<br>
                        &nbsp;&nbsp;sex ENUM('male','female') NOT NULL,<br>
                        &nbsp;&nbsp;dob DATE NOT NULL,<br>
                        &nbsp;&nbsp;height INT NOT NULL,<br>
                        &nbsp;&nbsp;address VARCHAR(255) NOT NULL,<br>
                        &nbsp;&nbsp;created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,<br>
                        &nbsp;&nbsp;updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP<br>
                        );</code>
                    </div>
                </div>

                <div class="table-section">
                    <h3>dmv_vehicles</h3>
                    <p>Stores vehicle registration records with stolen status tracking:</p>
                    <div class="code-block">
                        <code>CREATE TABLE dmv_vehicles (<br>
                        &nbsp;&nbsp;id INT PRIMARY KEY AUTO_INCREMENT,<br>
                        &nbsp;&nbsp;player_id INT NOT NULL,<br>
                        &nbsp;&nbsp;license_plate VARCHAR(20) NOT NULL,<br>
                        &nbsp;&nbsp;vehicle_model VARCHAR(50) NOT NULL,<br>
                        &nbsp;&nbsp;vehicle_props LONGTEXT NOT NULL,<br>
                        &nbsp;&nbsp;registration_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,<br>
                        &nbsp;&nbsp;is_active TINYINT(1) DEFAULT 1,<br>
                        &nbsp;&nbsp;is_stolen TINYINT(1) DEFAULT 0,<br>
                        &nbsp;&nbsp;FOREIGN KEY (player_id) REFERENCES dmv_players(id)<br>
                        );</code>
                    </div>
                    <p><strong>Key Fields:</strong></p>
                    <ul>
                        <li><code>is_active</code>: Whether the registration is active</li>
                        <li><code>is_stolen</code>: Whether the vehicle is marked as stolen (used by ANPR system)</li>
                    </ul>
                </div>

                <div class="table-section">
                    <h3>dmv_anpr_logs</h3>
                    <p>Stores ANPR detection logs:</p>
                    <div class="code-block">
                        <code>CREATE TABLE dmv_anpr_logs (<br>
                        &nbsp;&nbsp;id INT PRIMARY KEY AUTO_INCREMENT,<br>
                        &nbsp;&nbsp;officer_id INT NOT NULL,<br>
                        &nbsp;&nbsp;license_plate VARCHAR(20) NOT NULL,<br>
                        &nbsp;&nbsp;vehicle_model VARCHAR(50) NOT NULL,<br>
                        &nbsp;&nbsp;location VARCHAR(255) NOT NULL,<br>
                        &nbsp;&nbsp;camera_type ENUM('front','rear') NOT NULL,<br>
                        &nbsp;&nbsp;detected_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,<br>
                        &nbsp;&nbsp;FOREIGN KEY (officer_id) REFERENCES dmv_players(id)<br>
                        );</code>
                    </div>
                </div>
            </section>

            <!-- Changelog Section -->
            <section id="changelog" class="section">
                <h2>Changelog</h2>
                
                <div class="changelog-section">
                    <h3>Version 1.1.0 - Enhanced ANPR & Stolen Vehicle Management</h3>
                    <div class="changelog-date">Latest Update</div>
                    
                    <h4>New Features</h4>
                    <ul>
                        <li>Enhanced ANPR system with stolen vehicle detection</li>
                        <li>Stolen vehicle management for LEO officers</li>
                        <li>Configurable ANPR cooldown timers</li>
                        <li>Improved vehicle class detection (Class 18 - Police)</li>
                        <li>Priority-based alert system (stolen vehicles override unregistered)</li>
                    </ul>
                    
                    <h4>Improvements</h4>
                    <ul>
                        <li>Custom MM/DD/YYYY date input format</li>
                        <li>Enhanced character selection system</li>
                        <li>Improved ANPR detection logic</li>
                        <li>Better error handling and validation</li>
                        <li>Optimized performance with debug mode toggle</li>
                    </ul>
                    
                    <h4>Bug Fixes</h4>
                    <ul>
                        <li>Fixed ANPR not detecting stolen registered vehicles</li>
                        <li>Fixed date format issues in character selection</li>
                        <li>Fixed callback conflicts between client and server</li>
                        <li>Fixed initial ANPR delay preventing first alerts</li>
                    </ul>
                </div>
                
                <div class="changelog-section">
                    <h3>Version 1.0.0 - Initial Release</h3>
                    <div class="changelog-date">Initial Release</div>
                    
                    <h4>Core Features</h4>
                    <ul>
                        <li>Vehicle registration system</li>
                        <li>LEO lookup tools</li>
                        <li>Basic ANPR system</li>
                        <li>DMV document generation</li>
                        <li>Permission-based access control</li>
                    </ul>
                </div>
            </section>

            <!-- Troubleshooting Section -->
            <section id="troubleshooting" class="section">
                <h2>Troubleshooting</h2>
                
                <div class="troubleshooting-section">
                    <h3>Common Issues</h3>
                    
                    <div class="issue">
                        <h4>Database Connection Issues</h4>
                        <p><strong>Problem:</strong> Database errors or connection failures</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Verify oxmysql is loaded before TD-DMV</li>
                            <li>Check database credentials in oxmysql config</li>
                            <li>Ensure database tables were created properly</li>
                            <li>Check MySQL service is running</li>
                        </ul>
                    </div>
                    
                    <div class="issue">
                        <h4>Permission Errors</h4>
                        <p><strong>Problem:</strong> LEO commands not working</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Verify ACE permissions are set correctly</li>
                            <li>Check player has proper group assignment</li>
                            <li>Restart server after permission changes</li>
                            <li>Ensure permissions are in server.cfg</li>
                        </ul>
                    </div>
                    
                    <div class="issue">
                        <h4>ANPR Not Working</h4>
                        <p><strong>Problem:</strong> ANPR system not detecting vehicles</p>
                        <p><strong>Solutions:</strong></p>
                        <ul>
                            <li>Ensure you're in an emergency vehicle</li>
                            <li>Check ANPR permissions are set</li>
                            <li>Verify ANPR range settings in config</li>
                            <li>Check if vehicles are player-owned</li>
                        </ul>
                    </div>
                </div>
                
                <div class="debug-section">
                    <h3>Debug Mode</h3>
                    <p>Enable debug mode in <code>config.lua</code> for detailed logging:</p>
                    <div class="code-block">
                        <code>Config.Debug = true</code>
                    </div>
                    <p>This will provide detailed console output for troubleshooting.</p>
                </div>
            </section>

            <!-- Support Section -->
            <section id="support" class="section">
                <h2>Support</h2>
                
                <div class="support-content">
                    <div class="support-info">
                        <h3>Getting Help</h3>
                        <p>Our dedicated support team is here to help you get the most out of TD-DMV. Join our Discord community for instant support, updates, and feature requests.</p>
                        
                        <div class="support-links">
                            <a href="https://discord.gg/tWwfPnxz47" class="support-link discord">
                                <i class="fab fa-discord"></i>
                                Join Discord
                            </a>
                            <a href="mailto:support@tdscripts.com" class="support-link email">
                                <i class="fas fa-envelope"></i>
                                Email Support
                            </a>
                        </div>
                    </div>
                    
                    <div class="support-stats">
                        <div class="stat">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">Support</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">Fast</div>
                            <div class="stat-label">Response</div>
                        </div>
                        <div class="stat">
                            <div class="stat-number">Free</div>
                            <div class="stat-label">Updates</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
